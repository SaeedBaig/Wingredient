<!DOCTYPE html>

<!--
Python variables that need to be passed in for this template to render correctly:
- ingredients:  list of str (e.g. ['Milk', 'Eggs', 'Sugar'])
-->

<!--
Names of input fields to recieve in the Python backend:
- terms
- num_servings
- ingredients
- min_rating
- max_difficulty
- max_time
- pantry_only
- vegan
- vegetarian
- dairy_free
- gluten_free
-->

<!--Defines main language used by site (English)-->
<html lang="en">

<head>
  <!--Defines character encoding (utf-8, which is standard)-->
  <meta charset="UTF-8">

  <!--Makes webpage size adapt to device's screen size-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Non-Mako dependent styling from this file -->
  <link rel="stylesheet" href="../static/search.css">

  <%include file="/site_wide.html"/>

  <title>Wingredient</title>
</head>

<body>
  <center>

    <%include file="/navbar.html"/>

    <h1>Search for Recipes</h1>
    <br>

    <!--
    Mako function to generate a collapsible form input. Takes:
    name - Label that appears on the collapsible
    contents - The hidden contents inside the form that are revealed upon click
    -->
    <%def name="collapsible_form(name, contents)">
      <div class="wrap-collabsible">
        <input id="${name}_collapsible" class="toggle" type="checkbox">
        <label for="${name}_collapsible" class="lbl-toggle">${name}</label>
        <div class="collapsible-content">
          <div class="content-inner">
            ${contents}
          </div>
        </div>
      </div>
    </%def>

    <!-- Search form -->
    <form method="POST" class="justify-content-center">

      <!-- Ingredients -->
      <!-- This isn't in a collapsible form yet because it behaves weirdly -->
      <div class="form-group">
        <label for="ingredients">
          <h5>Ingredients</h5>
        </label>
        <input name="ingredients" id="ingredients" class="tags-input form-control">
        <script>
          'use strict';
          $('#ingredients').tagging(${ingredients});
        </script>
      </div>
      <br>

      <!-- Search terms -->
      ${collapsible_form('Search terms', """
        <div class='col-sm-5'>
          <input name='terms' type='search' class='form-control' id='search-box' placeholder='e.g. soup'>
        </div>
      """)}

      <!-- #Servings -->
      ${collapsible_form('#Servings', """
      <div class="col-sm-5">
        <input name="num_servings" type="number" class="form-control" id="num-servings" min="1" max="8">
      </div>
      """)}

      <!-- Min Rating -->
      ${collapsible_form('Minimum rating', """
        <div class="col-sm-5">
          <div class="input-group mb-3">
            <input name="min_rating" id="min-rating" type="number" class="form-control" min="0" max="100">
            <div class="input-group-append">
              <span class="input-group-text" id="basic-addon2">%</span>
            </div>
          </div>
        </div>
      """)}

      <!-- Max Difficulty -->
      ${collapsible_form('Max Difficulty', """
        <div class="col-sm-5">
          <select name="max_difficulty" class="form-control" id="max-difficulty">
            <option>Easy</option>
            <option>Medium</option>
            <option selected>Hard</option>
          </select>
        </div>
      """)}

      <!-- Maximum time to cook -->
      ${collapsible_form('Max time to cook', """
        <div class="col-sm-5">
          <div class="input-group mb-3">
            <input name="max_time" id="max-time" type="number" class="form-control" min="0" max="1440">
            <div class="input-group-append">
              <span class="input-group-text" id="basic-addon2">minutes</span>
            </div>
          </div>
        </div>
      """)}

      <!-- Restrictions (checkboxes) -->
      ${collapsible_form('Dietary Restrictions', """
        <!-- Pantry only -->
        <div class="form-group custom-control custom-checkbox">
          <input name="pantry_only" type="checkbox" class="custom-control-input" id="pantry_only">
          <label class="custom-control-label" for="pantry_only">Pantry only</label>
        </div>

        <!-- Vegan -->
        <div class="form-group custom-control custom-checkbox">
          <input name="vegan" type="checkbox" class="custom-control-input" id="vegan">
          <label class="custom-control-label" for="vegan">Vegan</label>
        </div>

        <!-- Vegetarian -->
        <div class="form-group custom-control custom-checkbox">
          <input name="vegetarian" type="checkbox" class="custom-control-input" id="vegetarian">
          <label class="custom-control-label" for="vegetarian">Vegetarian</label>
        </div>

        <!-- Dairy Free -->
        <div class="form-group custom-control custom-checkbox">
          <input name="dairy_free" type="checkbox" class="custom-control-input" id="dairy-free">
          <label class="custom-control-label" for="dairy-free">Dairy-free</label>
        </div>

        <!-- Gluten free -->
        <div class="form-group custom-control custom-checkbox">
          <input name="gluten-free" type="checkbox" class="custom-control-input" id="gluten-free">
          <label class="custom-control-label" for="gluten-free">Gluten-free</label>
        </div>
      """)}

      <!-- Submit button -->
      <br>
      <button class="btn btn-success" type="submit">
        <i class="fa fa-search" aria-hidden="true"></i> Search
      </button>
      &nbsp;

      <!-- Reset button -->
      <button class="btn btn-danger" type="reset">
        <i class="fa fa-undo" aria-hidden="true"></i> Reset
      </button>
    </form>

  </center>
  <br>
</body>
</html>
